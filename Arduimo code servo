#include <Servo.h>

Servo myservo;

int pos = 0;
int buttonState = 0;
int lastButtonState = 0; // Speichert den vorherigen Zustand

void setup() {
  myservo.attach(2);
  pinMode(5, INPUT);
  pinMode(6, OUTPUT);
  pinMode(7, OUTPUT);
}

void loop() {
  buttonState = digitalRead(5);

  // Prüfen, ob sich der Zustand geändert hat
  if (buttonState != lastButtonState) {
    // LED auf Pin 7 blinkt einmal bei jeder Zustandsänderung
    digitalWrite(7, HIGH);
    delay(500);
    digitalWrite(7, LOW);
  }

  if (buttonState == HIGH) {
    digitalWrite(6, HIGH);

    // Servo hin und her bewegen
    for (pos = 70; pos >= 30; pos -= 1) {
      myservo.write(pos);
      delay(65);
    }
    for (pos = 30; pos <= 70; pos += 1) {
      myservo.write(pos);
      delay(65);
    }

  } else {
    digitalWrite(6, LOW);
    myservo.write(70);
  }

  // aktuellen Zustand speichern
  lastButtonState = buttonState;
}
